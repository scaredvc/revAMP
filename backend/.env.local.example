# ---- Local-stack env (Docker Compose) ----
# Copy to backend/.env.local before running: docker compose -f docker-compose.local.yml up

APP_ENV=local

# Database — matches postgres service in docker-compose.local.yml
DATABASE_URL=postgresql://revamp:revamp_local@postgres:5432/revamp_local

# Security (safe for local dev only)
SECRET_KEY=local-dev-secret-change-in-production
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# API
API_HOST=0.0.0.0
API_PORT=8000

# CORS — allow local frontend origins
CORS_ORIGINS=http://localhost:3000,http://127.0.0.1:3000
CORS_ALLOW_CREDENTIALS=true

# Redis — matches redis service in docker-compose.local.yml
REDIS_URL=redis://redis:6379/0

# Rate Limiting
RATE_LIMIT_DAY=200/day
RATE_LIMIT_HOUR=50/hour
RATE_LIMIT_MINUTE=60/minute

# External API
EXTERNAL_API_URL=https://aimsmobilepay.com/api/zone/index.php
EXTERNAL_API_TIMEOUT=30

# Upstream Proxy (Lambda) — required for live parking data
# Without these the backend serves only cached DB snapshots.
# If you switch back to cloudscraper these can stay blank.
UPSTREAM_PROXY_URL=
UPSTREAM_PROXY_TOKEN=

# Circuit breaker for proxy
PROXY_CIRCUIT_THRESHOLD=10
PROXY_CIRCUIT_WINDOW_SECONDS=30
PROXY_CIRCUIT_COOLDOWN_SECONDS=30

# Cache
CACHE_TTL_SECONDS=300

# Logging
LOG_LEVEL=DEBUG
